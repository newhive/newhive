{% extends "pages/analytics/base.html" %}

{% block head %}
{{super()}}
<style>table { width: 400px; }</style>
<script>
  var data = {{json_data}};
  var r; var chart;
  $(function(){
  r = Raphael('canvas');
  var chart = r.linechart(20,0,r.width - 40,r.height - 20,data.dates,data.counts, {'axis': '0 1 0 1'}).hoverColumn(function () {
                    this.tags = r.set();

                    for (var i = 0, ii = this.y.length; i < ii; i++) {
                        this.tags.push(r.tag(this.x, this.y[i], epochToDate(data.dates[this.values[i] -1], {'time': false}) + ": " + this.values[i], 180, 10).insertBefore(this));
                    }
                }, function () {
                    this.tags && this.tags.remove();
                });
   });
</script>
{% endblock head %}

{% block header %}
<h1>{{title}}</h1>
<div style="width: 95%; height: 600px;" id="canvas"></div>
{% endblock %}

{% block table_body %}
{% for key, val in data %}
<tr><td data-type="epoch_date">{{key}}</td><td>{{val}}</td></tr>
{% endfor %}
{% endblock %}
