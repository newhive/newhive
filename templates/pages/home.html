{% extends "main.html" %}

{% block head%}
  <meta name="description" content="The New Hive makes it easy for
  anyone to express themselves online.  The content you create is your
  own, and can be easily shared anywhere. We will never put ads on
  your expressions, and oh yeah, it's free! So get on board and
  express yourself :)">
  <style>
    body.home.logged_out #nav_bg{background: {{colors['tan'] }}; }
    #homepage_header .signup_button {
      background-color: {{ colors['active'] }}; 
      color:#fff;
    }
    #homepage_header .signup_button:hover {
      background-color: {{ colors['highlight'] }};
      color: #000;
    }
    .abs { position : absolute; }
  </style>
  <script>
    function homepage_header() {
        var header = $('#homepage_header')
        if (header.length > 0) {
            $('#content').css('top',
              parseInt(header.find(' .background').css('height')) + 50
            );
        }
    }
    $(function(){
      var dia;
      $('.signup_button').click(function() {
        dia = showDialog('#dia_signup');
        $(this).addClass('open');
        $('input[name=forward]').val(window.location);
      });
      $(window).resize(homepage_header);
      homepage_header();
    });
    //$(document.body).load(function() { setTimeout(homepage_header, 500); });
  </script>
{% endblock %}

{% block body_classes %}{{ super() }} home{% endblock %}
{% block body %}

{% if user.logged_in %}
<div class='nav' style='right : 10px; top : 0px;'>
  {{ create_button(create) }}
</div>
{% else %}
<div id="homepage_header" style='width:100%; height:247px; background-color: {{ colors['tan'] }};'>
 <div style='position:relative; margin:0 auto; width:1000px; height:247px;'>
  {#<div class="happ background" style="left:0px; top:0px; width:1000px; height: 247px; background-color: {{ colors['tan'] }}; z-index: 3;"></div>#}
  <div class="abs" style="left: 48px; top: 40px; width: 420px; height: 56px; z-index: 3; font-size: 3.3em; font-weight: normal; font-family: Lobster;" data-scale="3.3">
    Express Your<span style="margin:-0.07em">self</span>
  </div>
  <div class='abs' style='width:485px; height: 44px; left:48px; top: 113px; z-index: 3; font-size: 0.75em;' data-scale="0.75">
    The New Hive makes it easy for anyone to express themselves
    online. The content you create is your own, and can be easily
    shared anywhere. We will never put ads on your expressions, and oh
    yeah, it's free! So get on board and express yourself :)
  </div>
  <div class='abs rounded signup_button' style='width:87px; white-space: nowrap; padding: 3px 5px 10px 5px; height: 24px; left:48px; top: 180px; z-index: 3; font-size: 1.4em;' data-scale="1.4">
    <span style="font-family: Museo;"><a href="" onclick="return false;">Sign up</a></span>
  </div>
  <div id="h_2" class="abs" style="left: 585px; top: 10px; width: 365.802px; height: 206.727px; z-index:3;">
    <iframe src="http://player.vimeo.com/video/18836819?title=0&amp;byline=0&amp;portrait=0" width="100%" height="100%" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>
  </div>
 </div>
</div>


{% endif %}

{% endblock %}


{% block content %}

{% if user.logged_in %}
 <div class='fathead'>
   <a href='http://thenewhive.thenewhive.com'><img src='/lib/skin/1/plus_lg.png'>A New Creative Playground</a>
 </div>
 {% endif %}
 <div id='tags'>
  {% for t in tags %}<a href='/home/{{ t|e }}' class='tag_label {{ 'current' if t == tag }}'>{{ t }}</a> {% endfor %}
 </div>

 <div id='feed'>{% include 'cards.html' %}</div>

 <script>
var load_page = null;
var next_page = 1;
var pages = {{ pages }};
$(window).scroll(function() {
    if(($(window).scrollTop() > $(document).height() - $(window).height() * 2) && !load_page && next_page < pages) {
        load_page = $.get('', { partial : true, page : next_page }, function(data) {
            load_page = null;
            next_page ++;
            $('#feed').append(data);
        });
    }
});
 </script>
{% endblock %}
