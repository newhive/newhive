{% extends "main.html" %}

{% block content %}
 <br><br>
 <table width='100%' height='100%'><tr><td valign='middle' align='center'>
 <div style='display:inline-block;text-align:left'>

 <form id='form' method='POST'>
  <input type='hidden' name='action' value='user_create'>

  <b>Username</b><br>
  <input id='name' type='text' name='name' value='{{f.name}}'><br>
  <br>

  <b>Password</b><br>
  <input id='p1' type='password' name='password' value='{{f.secret}}'><br>
  <b>Repeat</b><br>
  <input id='p2' type='password' value='{{f.secret}}'><br>
  <br>
  
  <b>Email</b><br>
  <input type='text' name='email' value='{{f.email}}'><br>
  <br>
  
  <b>Full Name</b><br>
  <input type='text' name='fullname' value='{{f.fullname}}'><br>
  <br>

  <input class='medbold' type='submit' value='Create Account!'>
 
 </form>
 <script>
function validate() {
    var n = $('#name').val().trim();
    $('#name').val(n);
    if( $('#name').val().length < 3 ) {
        alert('Please enter username of at least 3 letters');
        return false;
    }
    if( ! n.match(/^[a-z][a-z0-9]{2,}$/i) ) {
        alert('Username must start with a letter and only contain 2 or more letters and numbers');
        return false;
    }
    if( $('#p1').val().length < 4 ) {
        alert('Password too short');
        return false;
    }
    if( $('#p1').val() != $('#p2').val() ) {
        alert('Passwords do not match');
        return false;
    }
    if( ! $('[name=email]').val().match(/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+[a-zA-Z0-9]{2,4}$/) ) {
        alert('Please enter valid email address.');
        return false;
    }
}
$('#form').submit(validate);
 </script>
 
 </div>
 </td></tr></table>
{% endblock %}
