<!DOCTYPE html>
<html>
<head>
 <title>{{ 'The New Hive' if not title else title }}</title>
 <link rel='shortcut icon' type='image/png' href={{ icon }}>

 <style id='css_base'>
html, body { margin : 0; padding : 0; font-family : Helvetica, sans-serif; font-size : 13pt; color : {{ colors[0] }}; white-space-collapse : discard; }
img { padding : 0; margin : 0; border : 0; }
a { color : inherit; text-decoration : none; }
.happ a { text-decoration : underline; }
input[type=text], input[type=password], textarea { border : 5px solid {{ colors['unselected'] }}; padding : 5px; }
input[type=text]:focus, input[type=password]:focus, textarea:focus { border-color : {{ colors['selected'] }}; }
input[type=button], input[type=submit] { border : none; }
h1 { font-size : 40px; }
form { display : inline; }
.menu { display : none; border : 0px solid {{ colors['unselected'] }};
    background-color : white; z-index : 1100; font-size : 11pt; position : absolute;
    -moz-box-shadow: 05px 05px 05px #888;
    -webkit-box-shadow: 05px 05px 05px #888;
    box-shadow: 05px 05px 05px #888;
    }
.menu_item { color : {{ colors[18] }}; padding : 5px 8px; cursor : default; font-size : 15pt; white-space : nowrap; }
.menu_item:hover, .menu_hover { background-color : {{ colors['selected'] }}; color : {{ colors[0] }}; }
.nav_icon { height : 50px; line-height : 50px; vertical-align : middle; display : inline-block; cursor : default; }
.nav_icon * { vertical-align : middle; }
.nav_icon.active { color : white; background-color : {{ colors[12] }}; }
.nav_icon.text { padding : 0 10px; }
.border { border : 5px solid {{ colors['unselected'] }}; padding : 5px; }
.selected { border-color : {{ colors['selected'] }}; }
.medbold { font-weight : bold; font-size : 1.23em; }
.btn { font-weight : bold; font-size : 1.23em; display : inline-block; cursor : default; }
.black { background-color : black; color : white; }
.error { color : {{ colors['active'] }}; }
#user { position : fixed; display : inline-block; }
.nav { position : fixed; margin : 0; }
#nav_bg { top : 0; left : 0; width : 100%; height : 50px; background-image : url('/lib/skin/1/nav_gradient.png'); z-index : 1; }
.menu, .top, .nav { z-index : 1; }
.spacer { height : 10px; }
#bg { position : fixed; top : 0; left : 0; width : 100%; height : 100%; overflow : hidden z-index : 0; background-color : white; }
#body { position : absolute; top : 0; left : 0; min-width : 100%; min-height : 100%; z-index : 1; }
#content { position : absolute; top : 50px; left : 0; z-index : 0; min-width : 100%; }

@font-face { src: url('/lib/fonts/Museo/Museo500-Regular.otf'); font-family: Museo; font-weight: 500; }
@font-face { src: url('/lib/fonts/Museo/Museo700-Regular.otf'); font-family: Museo; font-weight: 700; }
@font-face { src: url('/lib/fonts/BPscript/BPscript.otf'); font-family: BPscript; font-weight : 500; }
@font-face { src: url('/lib/fonts/ChanticleerRoman/CHANTICL.ttf'); font-family: Chanticleer; font-weight : 500; }
@font-face { src: url('/lib/fonts/code/CODE_Bold.otf'); font-family: Code; font-weight : 700; }
@font-face { src: url('/lib/fonts/code/CODE_Light.otf'); font-family: Code; font-weight : 500; }
@font-face { src: url('/lib/fonts/Comic-Zine-OT/comic_zine_ot.otf'); font-family: Comic Zine; font-weight : 500; }
@font-face { src: url('/lib/fonts/Folk/Folkoutline.otf'); font-family: Folk Outline; font-weight : 500; }
@font-face { src: url('/lib/fonts/Folk/Folkshadow.otf'); font-family: Folk Shadow; font-weight : 500; }
@font-face { src: url('/lib/fonts/Folk/Folksketches.otf'); font-family: Folk Sketches; font-weight : 500; }
@font-face { src: url('/lib/fonts/Folk/Folksolid.otf'); font-family: Folk; font-weight : 500; }
@font-face { src: url('/lib/fonts/Lane/LANENAR_.ttf'); font-family: Lane; font-weight : 500; }
@font-face { src: url('/lib/fonts/Lane/LANEPOSH.ttf'); font-family: Lane Posh; font-weight : 500; }
@font-face { src: url('/lib/fonts/Lane/LANEUP__.ttf'); font-family: Lane Up; font-weight : 500; }
@font-face { src: url('/lib/fonts/League-Gothic/League_Gothic.otf'); font-family: League Gothic; font-weight : 500; }
@font-face { src: url('/lib/fonts/LemonChicken/LEMONCHI.ttf'); font-family: Lemon Chi; font-weight : 500; }
@font-face { src: url('/lib/fonts/Lilly/Lilly__.ttf'); font-family: Lilly; font-weight : 500; }
@font-face { src: url('/lib/fonts/Lobster/Lobster_1.3.otf'); font-family: Lobster; font-weight : 500; }
@font-face { src: url('/lib/fonts/Matiz/Matiz.ttf'); font-family: Matiz; font-weight : 500; }
@font-face { src: url('/lib/fonts/quicksand_2/Quicksand_Bold_Oblique.otf'); font-family: Quicksand; font-weight : 700; font-style : italic; }
@font-face { src: url('/lib/fonts/quicksand_2/Quicksand_Bold.otf'); font-family: Quicksand; font-weight : 700; }
@font-face { src: url('/lib/fonts/quicksand_2/Quicksand_Book_Oblique.otf'); font-family: Quicksand; font-weight : 500; font-style : italic; }
@font-face { src: url('/lib/fonts/quicksand_2/Quicksand_Book.otf'); font-family: Quicksand; font-weight : 500; }
@font-face { src: url('/lib/fonts/bitstream-vera/VeraMoBd.ttf'); font-family: Bitstream Mono; font-weight : 700; }
@font-face { src: url('/lib/fonts/bitstream-vera/VeraMoBI.ttf'); font-family: Bitstream Mono; font-weight : 700; font-style : italic; }
@font-face { src: url('/lib/fonts/bitstream-vera/VeraMoIt.ttf'); font-family: Bitstream Mono; font-weight : 500; font-style : italic; }
@font-face { src: url('/lib/fonts/bitstream-vera/VeraMono.ttf'); font-family: Bitstream Mono; font-weight : 500; }

 </style>
 <style>
html, body { background-color : white; height : 100%; }
 </style>

 <script src='/lib/jquery.js'></script>
 <script src='/lib/util.js'></script>
 {% block head %}{% endblock %}
</head>
<body>

<div id='bg' {% if exp and exp.background and exp.background.color %}style='background-color : {{ exp.background.color }}'{% endif %}
>{#% if exp and exp.background.url and exp.background.fill == 'stretch' %}<img src='{{ exp.background.url }}' onload='background_fit(this)' style='width:100%'>{% endif %#}</div>
<script>
//background_fit = function(bg) {
//    var fill = '{#{ exp.background.fill }#}';
//    if(o.fill == 'stretch') {
//        o.img = $('<img>').attr('src', o.url).css({ 'width' : '100%', opacity : o.opacity});
//        $('#bg').append(o.img);
//        $(o.img).load(function() {
//            o.ratio = o.img.width() / o.img.height();
//            o.img.css('width','');
//            $(window).resize();
//        });
//        $(window).resize(function() {
//            var win_size = [$(window).width(), $(window).height()];
//            if(win_size[0] / win_size[1] > o.ratio) { o.img.width(win_size[0]); o.img.height(win_size[0] / o.ratio); }
//            else { o.img.width(win_size[1] * o.ratio); o.img.height(win_size[1]); }
//        });
//    }
//    else $('#bg').css({ 'background-image' : o.url });
//}
</script>

<div id='body'>

<div class='nav' id='nav_bg'></div>
<div class='nav' style='font-weight : bold'>
 <a href='{{ server }}'><img id='logo' class='hoverable' style='left : 5px; top : 0px; height : 50px; vertical-align : middle' src={{ icon }}></a>
 {% if user.logged_in %}
  <div class='nav_icon' style='left : 50px; top : 0;'><a href='{{ home_url }}'>{{ user['name'] }}</a></div>
  <img id='user_menu_handle' src='{{ server }}lib/skin/1/drop_arrow.png'>
  <div id='user_menu' class='menu'>
   <form name='logout_form' action='{{ secure_server }}' method='POST'>
    <input name='action' value='logout' type='hidden'>
   </form>
   <div class='menu_item' onclick='document.logout_form.submit()'>Logout</div>
   <!--<div class='menu_item'>Change&nbsp;icon</div>
   <div class='menu_item'>Settings</div>-->
  </div>
  <script>hover_menu($('#user_menu_handle'), $('#user_menu'));</script>
 {% else %}
  <a href='{{ server }}'><div style='left : 50px; top : 0px;' class='nav nav_icon'><img src='/lib/skin/1/logotype.png'><img src='/lib/skin/1/logotype_beta.png'></div></a>
 {% endif %}
</div>

{% block body %}
{% endblock %}

<div id='content'>{% block content %}{% endblock %}</div>

</div>

</body>
</html>
