<!DOCTYPE html>
<html>
<head>
 <title>{{ 'The New Hive' if not title else title }}</title>
 <link rel='shortcut icon' type='image/png' href={{ icon }}>

 <style id='css_base'>
html, body { margin : 0; padding : 0; font-family : Arial, sans-serif; font-size : 13pt; color : {{ colors[0] }}; }
img { padding : 0; margin : 0; border : 0; }
a { color : inherit; text-decoration : none; }
input[type=text], input[type=password], textarea { border : 5px solid {{ colors['unselected'] }}; padding : 5px; }
input[type=text]:focus, input[type=password]:focus, textarea:focus { border-color : {{ colors['selected'] }}; }
input[type=button], input[type=submit] { border : none; }
h1 { font-size : 40px; }
form { display : inline; }
.menu { position : absolute; display : none; border : 5px solid {{ colors['unselected'] }};
    background-color : white; padding : 0; z-index : 1100; }
.menu_item { color : {{ colors[18] }}; padding : 5px 8px; cursor : default; font-family : Arial; font-size : .9em; }
.menu_item:hover { background-color : {{ colors['selected'] }}; color : {{ colors[0] }}; }
.tooltip { position : absolute; color : {{ colors['active'] }}; display : none; white-space : nowrap; }
.border { border : 5px solid {{ colors['unselected'] }}; padding : 5px; }
.selected { border-color : {{ colors['selected'] }}; }
.medbold { font-weight : bold; font-size : 1.23em; font-family : Museo; }
.active { color : {{ colors['active'] }}; }
#user { position : absolute; display : inline-block; color : white; height : 44px; }
#nav_bg { top : 0; left : 0; width : 1000px; height : 44px; }
.nav { position : fixed; margin : 0; padding : 0; }
.menu, .top, .nav { z-index : 1100; }
@font-face {
    font-family: Museo;
    src: url('/lib/fonts/Museo500-Regular.otf');
    font-weight: 500;
}
@font-face {
    font-family: Museo;
    src: url('/lib/fonts/Museo700-Regular.otf');
    font-weight: 700;
}
 </style>
 <style>
html, body { background-color : white; height : 100%; }
 </style>

 <script src='/lib/jquery.js'></script>
 <script src='/lib/util.js'></script>
 {% block head %}{% endblock %}
</head>
<body>

<img src='/lib/skin/1/nav_bg.png' class='nav scale' id='nav_bg'>
<a href='{{ server }}'><img id='logo' class='hoverable nav scale' style='left : 5px; top : 0px; width : 44px; height : 44px;' src={{ icon }}></a>
{% if user.logged_in %}
 <div id='user' class='medbold nav scale' style='left : 50px; top : 8px;'>
  <nobr>
   <a href='{{ home_url }}'>{{ user['name'] }}</a>
   <img id='user_menu_handle' src='{{ server }}lib/skin/1/drop_arrow.png' class='scale'>
  </nobr>
  <div id='user_menu' class='menu'>
   <form name='logout_form' action='{{ secure_server }}' method='POST'>
    <input name='action' value='logout' type='hidden'>
   </form>
   <div class='menu_item' onclick='document.logout_form.submit()'>Logout</div>
   <!--<div class='menu_item'>Change&nbsp;icon</div>
   <div class='menu_item'>Settings</div>-->
  </div>
  <script>hover_menu($('#user_menu_handle'), $('#user_menu'));</script>
 </div>
{% else %}
 <a href='{{ server }}'><img id='logotype' src='/lib/skin/1/logotype.png' class='nav scale' style='left : 50px; top : 0; width : 216px; height : 44px'></a>
{% endif %}

{% block body %}
{% endblock %}

<script>
var elems = [];
$('.scale').each(function(i, e) {
    var o = { e : $(e) };
    o.pos = $(o.e).position();
    o.fs = parseFloat(o.e.css('font-size')) / 17.3333;
    o.dims = [ o.e.width(), o.e.height() ];
    elems.push(o);
});
$(window).resize(function() {
   var s = $(window).width() / 1000;
   $.map(elems, function(o) {
       o.e.css({ left : o.pos.left * s, top : o.pos.top * s,
           width : o.dims[0] * s, height : o.dims[1] * s});
       if(o.fs != 1) o.e.css('font-size', o.fs * s + 'em');
   });
});
$(window).resize();
</script>
</body>
</html>
