{# Profile card and header
  User thumb, name, view/love counts
#}
{<if brief}
  <div class="owner profile brief">
    <a {anchor_attrs "expressions_public" "owner_name" name}>
      <img src='{thumb_small}' class='thumb'></a>
    {|templates/user_actions.html}
    <a {anchor_attrs "expressions_public" "owner_name" name}
      class='ellipsis'>by &nbsp;<span class='username'>{owner.name}</span></a>
  </div>
{>}{<else}
  <div class='user_header header{<if profile_bg} with_background{>}'>
    {<if profile_bg}<div class='background'><img src='{profile_bg}'></div>{>}
    <div class='profile'>
      {<if (not flags.mobile)}
        <a {anchor_attrs "expressions_public" "owner_name" name}><img src='{thumb_big}' class='thumb'></a>
      {>}
      <div class='info'>
        <div class='title_bar'>
          {|templates/user_actions.html}
          {<if flags.mobile}
            <a {anchor_attrs "expressions_public" "owner_name" name}><img src='{thumb_big}' class='thumb'></a>
          {>}
          <a {anchor_attrs "expressions_public" "owner_name" name}>
            <div class='title ellipsis fullname'>{fullname|e}</div></a>
        </div>
        {# <div class='subheading text'>{subheading}</div> #}
        <div class='about text'>{profile_about}</div>
        <div class='nav_bar'>
          {# expressions public, count #}
          <a class='nav_button inline exprs' 
            {# {<if route_name "expressions_public_grid"} on{>} #}
            title="{expressions} expression(s)"
            { anchor_attrs "expressions_public_grid" "owner_name" owner.name 
              "tag_name" ""}>
            <img class="exprs" src='{asset "skin/nav/expressions.png"}'/> 
            {<if expressions}{thousands expressions}{>}</a
          ><div class='spacer inline'></div>
          {# tags #}
          {<if (not flags.mobile)}
            <a class='nav_button inline tags'
                {<if (or (eq route_name "expressions_tag_private")
                         (eq route_name "expressions_public_grid_tags"))}
                  { anchor_attrs "expressions_tag" "owner_name" owner.name 
                  "tag_name" tag_selected}>
                {>}{<else}
                  { anchor_attrs "expressions_public_tags" "owner_name" owner.name }>
                {>}
              <div class="tags icon{<if (or (eq route_name "expressions_public_tags")
                (eq route_name "expressions_tag"))} on{>}"></div></a
            ><div class='spacer inline'></div>
          {>}
          {# following #}
          <a class='nav_button txt_button inline upper{<if route_name "following"} on{>}' 
            { anchor_attrs "following" "owner_name" owner.name }>
            Following</a
          ><div class='spacer inline'></div>
          {# followers #}
          <a class='nav_button txt_button inline upper{<if route_name "followers"} on{>}'
            { anchor_attrs "followers" "owner_name" owner.name }>
            Followers</a
          ><div class='spacer inline'></div>
          {# loves #}
          <a class='nav_button inline'
            { anchor_attrs "loves" "owner_name" owner.name }>
            <div class="love icon{<if route_name "loves"} on{>}"></div></a
          {<if user.logged_in}{<if user.name owner.name}
            ><div class='spacer inline'></div>
            {# private (logged in only) #}
            <a class='nav_button inline private'
              {<if (or (eq route_name "expressions_tag")
                       (eq route_name "expressions_public_grid_tags"))}
                { anchor_attrs "expressions_tag_private" "owner_name" user.name 
                "tag_name" tag_selected "entropy" tag_entropy}>
              {>}{<else}
                { anchor_attrs "expressions_private" "owner_name" user.name }>
              {>}
              <div class='private icon
                {<if (or (eq route_name "expressions_private")
                    (eq route_name "expressions_tag_private"))} on{>}'></div></a
          {>}{>}
        ></div>
      </div>
    </div>
  </div>
{>}
